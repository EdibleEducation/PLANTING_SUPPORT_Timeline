<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vegetable Harvest Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #228B22;
        }
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            z-index: 1000;
            display: none;
            text-align: center;
        }
        /* Styles to ensure a clean, legible printout */
        @media print {
            body {
                background-color: white !important;
                padding: 0 !important;
            }
            /* Hide the main container background/shadow for printing */
            .bg-white, .shadow-xl {
                box-shadow: none !important;
            }
            /* Elements we want to hide when printing: inputs, buttons, messages */
            .print-hide { 
                display: none !important;
            }
            /* Ensure the report content fills the page and cards stack cleanly */
            .max-w-xl {
                max-width: 100% !important;
                margin: 0 !important;
            }
            .p-6, .p-8 {
                padding: 1rem !important;
            }
            .grid {
                grid-template-columns: 1fr !important;
                gap: 1rem !important;
            }
            .sm\:col-span-2 {
                grid-column: span 1 / span 1 !important;
            }
            /* Reset specific card backgrounds */
            .bg-gray-50, .bg-yellow-50 {
                background-color: #f9fafb !important;
            }
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <!-- Main Container -->
    <div class="max-w-xl mx-auto bg-white rounded-3xl shadow-xl overflow-hidden">
        <div class="p-6 sm:p-8 space-y-6">

            <!-- Header (Always visible) -->
            <div class="text-center">
                <h1 class="text-3xl sm:text-4xl font-bold text-green-700">Vegetable Planner</h1>
                <p class="mt-2 text-green-600 print-hide">Calculate your thinning and harvest dates!</p>
            </div>

            <!-- Input Form (Hidden on print) -->
            <div class="space-y-4 print-hide">
                <div>
                    <label for="plantingDate" class="block text-sm font-medium text-gray-700">1. Enter Planting Date</label>
                    <input type="date" id="plantingDate" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-all">
                </div>
                <div>
                    <label for="vegetableSelect" class="block text-sm font-medium text-gray-700">2. Select a Vegetable</label>
                    <select id="vegetableSelect" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-all">
                        <option value="">-- Please Select --</option>
                        <option value="Beets">Beets</option>
                        <option value="Radishes">Radishes</option>
                        <option value="Turnips">Turnips</option>
                        <option value="Carrots">Carrots</option>
                        <option value="Lettuce">Lettuce</option>
                        <option value="Kale">Kale</option>
                        <option value="Swiss Chard">Swiss Chard</option>
                        <option value="Spinach">Spinach</option>
                    </select>
                </div>
            </div>

            <!-- Print Button (Hidden until results shown, hidden on print) -->
            <button id="printReportButton" class="w-full bg-green-500 text-white font-semibold py-3 rounded-xl shadow-lg hover:bg-green-600 transition-colors hidden print-hide">
                Print Classroom Report
            </button>

            <!-- Results Section -->
            <div id="results" class="hidden">
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    
                    <!-- Row 1, Column 1: Initial Seeding Distance -->
                    <div class="bg-gray-50 p-5 rounded-xl shadow-md space-y-3">
                        <h3 class="text-lg font-semibold text-green-800">Initial Seeding Distance</h3>
                        <p class="text-sm text-gray-500">The recommended distance between seeds when first planting.</p>
                        <p class="text-2xl font-bold text-gray-900" id="seedingDistanceDisplay">--</p>
                    </div>

                    <!-- Row 1, Column 2: Germination Date -->
                    <div class="bg-gray-50 p-5 rounded-xl shadow-md space-y-3">
                        <h3 class="text-lg font-semibold text-green-800">Germination Date</h3>
                        <p class="text-sm text-gray-500">The day your seeds should sprout!</p>
                        <p class="text-2xl font-bold text-gray-900" id="germinationDateDisplay">--</p>
                        <p class="text-green-600 font-medium print-hide" id="germinationCountdown">Calculating...</p>
                    </div>
                    
                    <!-- Row 2, Column 1: Thinning Date -->
                    <div class="bg-gray-50 p-5 rounded-xl shadow-md space-y-3">
                        <h3 class="text-lg font-semibold text-green-800">Thinning Date</h3>
                        <p class="text-sm text-gray-500">Time to thin your seedlings for better growth.</p>
                        <p class="text-2xl font-bold text-gray-900" id="thinningDateDisplay">--</p>
                        <p class="text-green-600 font-medium print-hide" id="thinningCountdown">Calculating...</p>
                        <p class="text-sm font-medium text-gray-700 mt-2">Thin when plant is:</p>
                        <p class="text-lg font-bold text-gray-900" id="thinningHeightDisplay">--</p>
                        <p class="text-sm font-medium text-gray-700 mt-2">Space plants:</p>
                        <p class="text-lg font-bold text-gray-900" id="thinningSpacingDisplay">--</p>
                    </div>
                    
                    <!-- Row 2, Column 2: Harvesting Card -->
                    <div class="bg-gray-50 p-5 rounded-xl shadow-md space-y-3">
                        <h3 class="text-lg font-semibold text-green-800">Harvesting Date</h3>
                        <p class="text-sm text-gray-500">The day to enjoy the fruits of your labor!</p>
                        <p class="text-2xl font-bold text-gray-900" id="harvestDateDisplay">--</p>
                        <p class="text-green-600 font-medium print-hide" id="harvestCountdown">Calculating...</p>
                        <p class="text-sm font-medium text-gray-700 mt-2">Harvest when plant is:</p>
                        <p class="text-lg font-bold text-gray-900" id="harvestSizeDisplay">--</p>
                    </div>

                    <!-- Row 3, Spanning 2 columns: Growth Tip Card -->
                    <div class="bg-yellow-50 p-5 rounded-xl shadow-md space-y-3 sm:col-span-2">
                        <h3 class="text-lg font-semibold text-green-800">Growth Tips & Troubleshooting</h3>
                        <p class="text-base font-medium text-gray-900" id="growthTipDisplay">--</p>
                    </div>
                </div>
            </div>

            <!-- Message Box -->
            <div id="messageBox" class="message-box rounded-xl print-hide">
                <p id="messageText" class="text-center font-semibold text-gray-700 mb-4"></p>
                <button id="closeButton" class="px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-colors">OK</button>
            </div>
        </div>
    </div>

    <script>
        const vegetableData = {
            Beets: { 
                germinationDays: 7, thinWeeks: 4, thinHeight: "2-3 inches", thinSpacing: "3-4 inches apart", harvestWeeks: 9, harvestSize: "1-3 inches in diameter", seedingDistance: "1 inch apart", 
                growthTip: "Beets need rich, well-drained soil. If planted in dry, rocky soil, they often fail to form proper roots and remain small and woody." 
            },
            Radishes: { 
                germinationDays: 5, thinWeeks: 2, thinHeight: "1-2 inches", thinSpacing: "2 inches apart", harvestWeeks: 4, harvestSize: "1 inch in diameter", seedingDistance: "1/2 inch apart", 
                growthTip: "Radishes must be planted in cool weather and harvested quickly. Hot weather can cause them to become pithy and overly spicy." 
            },
            Turnips: { 
                germinationDays: 5, thinWeeks: 3, thinHeight: "3-4 inches", thinSpacing: "4-6 inches apart", harvestWeeks: 8, harvestSize: "2-3 inches in diameter", seedingDistance: "4 inches apart", 
                growthTip: "Turnips are frost-tolerant. Mulch heavily to keep soil cool and moist for the best root development." 
            },
            Carrots: { 
                germinationDays: 15, thinWeeks: 4, thinHeight: "2 inches", thinSpacing: "2-3 inches apart", harvestWeeks: 12, harvestSize: "1/2-1 inch in diameter", seedingDistance: "1/4 inch apart", 
                growthTip: "Carrots need deep, loose, rock-free soil. If the soil is too dense, the roots will fork or become stubby." 
            },
            Lettuce: { 
                germinationDays: 8, thinWeeks: 3, thinHeight: "4 inches", thinSpacing: "6-12 inches apart", harvestWeeks: 8, harvestSize: "A full head or outer leaves", seedingDistance: "1 inch apart", 
                growthTip: "Lettuce is sensitive to heat. Plant in a spot with afternoon shade or succession plant small batches every two weeks." 
            },
            Kale: { 
                germinationDays: 8, thinWeeks: 4, thinHeight: "4-6 inches", thinSpacing: "12-18 inches apart", harvestWeeks: 10, harvestSize: "Leaves are 8-10 inches long", seedingDistance: "4 inches apart", 
                growthTip: "Kale tastes best when leaves are harvested after a light frost, which sweetens the flavor." 
            },
            "Swiss Chard": { 
                germinationDays: 8, thinWeeks: 4, thinHeight: "4 inches", thinSpacing: "6-12 inches apart", harvestWeeks: 9, harvestSize: "Leaves are 6-8 inches long", seedingDistance: "2 inches apart", 
                growthTip: "Swiss Chard is a 'cut-and-come-again' crop. Harvest the outer leaves first and leave the center stalk to continue growing." 
            },
            Spinach: { 
                germinationDays: 10, thinWeeks: 3, thinHeight: "2 inches", thinSpacing: "3-5 inches apart", harvestWeeks: 6, harvestSize: "Leaves are 3-5 inches long", seedingDistance: "1 inch apart", 
                growthTip: "Spinach bolts (goes to seed) quickly in hot weather. Keep the soil moist and plant in the cooler seasons." 
            },
        };

        const plantingDateInput = document.getElementById('plantingDate');
        const vegetableSelect = document.getElementById('vegetableSelect');
        const resultsDiv = document.getElementById('results');
        const printReportButton = document.getElementById('printReportButton'); 

        const germinationDateDisplay = document.getElementById('germinationDateDisplay');
        const germinationCountdownDisplay = document.getElementById('germinationCountdown');
        const thinningDateDisplay = document.getElementById('thinningDateDisplay');
        const harvestDateDisplay = document.getElementById('harvestDateDisplay');
        const thinningCountdownDisplay = document.getElementById('thinningCountdown');
        const harvestCountdownDisplay = document.getElementById('harvestCountdown');
        const thinningHeightDisplay = document.getElementById('thinningHeightDisplay');
        const thinningSpacingDisplay = document.getElementById('thinningSpacingDisplay');
        const harvestSizeDisplay = document.getElementById('harvestSizeDisplay');
        const seedingDistanceDisplay = document.getElementById('seedingDistanceDisplay');
        const growthTipDisplay = document.getElementById('growthTipDisplay'); 
        
        const messageBox = document.getElementById('messageBox');
        const messageText = document.getElementById('messageText');
        const closeButton = document.getElementById('closeButton');

        // Function to show a custom message box instead of alert()
        function showMessage(message) {
            messageText.textContent = message;
            messageBox.style.display = 'block';
        }

        // Function to close the custom message box
        closeButton.addEventListener('click', () => {
            messageBox.style.display = 'none';
        });
        
        // Function to calculate and display the dates
        function calculateDates() {
            const plantingDateStr = plantingDateInput.value;
            const selectedVeg = vegetableSelect.value;

            if (!plantingDateStr || !selectedVeg) {
                // Hide results and print button if input is incomplete
                resultsDiv.classList.add('hidden');
                printReportButton.classList.add('hidden');
                return;
            }

            const plantingDate = new Date(plantingDateStr + 'T00:00:00');
            const today = new Date();
            const vegData = vegetableData[selectedVeg];

            const germinationDays = vegData.germinationDays;
            const daysToThin = vegData.thinWeeks * 7;
            const daysToHarvest = vegData.harvestWeeks * 7;
            
            // Calculate dates
            const germinationDate = new Date(plantingDate);
            germinationDate.setDate(plantingDate.getDate() + germinationDays);

            const thinningDate = new Date(plantingDate);
            thinningDate.setDate(plantingDate.getDate() + daysToThin);

            const harvestDate = new Date(plantingDate);
            harvestDate.setDate(plantingDate.getDate() + daysToHarvest);

            // Format dates for display
            const formatter = new Intl.DateTimeFormat('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            // Display calculated data
            germinationDateDisplay.textContent = formatter.format(germinationDate);
            thinningDateDisplay.textContent = formatter.format(thinningDate);
            harvestDateDisplay.textContent = formatter.format(harvestDate);
            
            thinningHeightDisplay.textContent = vegData.thinHeight;
            thinningSpacingDisplay.textContent = vegData.thinSpacing;
            harvestSizeDisplay.textContent = vegData.harvestSize;
            seedingDistanceDisplay.textContent = vegData.seedingDistance;
            growthTipDisplay.textContent = vegData.growthTip;

            // Calculate countdowns
            const germinationTimeRemaining = germinationDate.getTime() - today.getTime();
            const thinningTimeRemaining = thinningDate.getTime() - today.getTime();
            const harvestTimeRemaining = harvestDate.getTime() - today.getTime();

            function formatCountdown(timeRemaining) {
                if (timeRemaining < 0) {
                    return "Past due!";
                }
                const days = Math.ceil(timeRemaining / (1000 * 60 * 60 * 24));
                if (days === 0) {
                    return "Today!";
                }
                if (days === 1) {
                    return "In 1 day";
                }
                return `In ${days} days`;
            }

            germinationCountdownDisplay.textContent = formatCountdown(germinationTimeRemaining);
            thinningCountdownDisplay.textContent = formatCountdown(thinningTimeRemaining);
            harvestCountdownDisplay.textContent = formatCountdown(harvestTimeRemaining);

            // Show the results section and print button
            resultsDiv.classList.remove('hidden');
            printReportButton.classList.remove('hidden');
        }

        // Print Report Functionality
        printReportButton.addEventListener('click', () => {
            window.print();
        });

        // Event listeners to trigger calculations on input change
        plantingDateInput.addEventListener('change', calculateDates);
        vegetableSelect.addEventListener('change', calculateDates);

    </script>

</body>
</html>
